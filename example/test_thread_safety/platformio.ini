; PlatformIO Project Configuration File
; Thread Safety Test Suite for Logger

[env:esp32dev]
platform = espressif32
board = esp32dev
framework = arduino

; Serial configuration
upload_port = /dev/ttyACM0
monitor_port = /dev/ttyACM0
monitor_speed = 921600
monitor_filters = 
    direct              ; Show raw output to see corruption
    esp32_exception_decoder

; Build configuration
build_flags = 
    -D CORE_DEBUG_LEVEL=5
    -D USE_CUSTOM_LOGGER
    ; Increase serial buffers to reduce corruption
    -D SERIAL_TX_BUFFER_SIZE=1024
    -D CONFIG_ARDUINO_SERIAL_BUFFER_SIZE=1024
    ; FreeRTOS config
    -D CONFIG_FREERTOS_HZ=1000
    -D CONFIG_FREERTOS_ASSERT_ON_UNTESTED_FUNCTION=1
    ; Logger config
    -D CONFIG_LOG_BUFFER_SIZE=512

; Library dependencies - Logger is symlinked in lib/
lib_deps =