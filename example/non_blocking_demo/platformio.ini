; PlatformIO Project Configuration File
; Non-Blocking Logger Backend Demo

[env:esp32dev]
platform = espressif32
board = esp32dev
framework = arduino

; Serial configuration
upload_port = /dev/ttyACM0
monitor_port = /dev/ttyACM0
monitor_speed = 115200
monitor_filters = 
    direct
    esp32_exception_decoder

; Build configuration
build_flags = 
    -D CORE_DEBUG_LEVEL=5
    -D USE_CUSTOM_LOGGER
    ; Keep default small buffer to demonstrate the issue
    -D SERIAL_TX_BUFFER_SIZE=128
    -D CONFIG_ARDUINO_SERIAL_BUFFER_SIZE=128

; Library dependencies - Logger is symlinked in lib/
lib_deps = 

; Alternative configuration with larger buffer
[env:esp32dev_large_buffer]
extends = env:esp32dev
build_flags = 
    -D CORE_DEBUG_LEVEL=5
    -D USE_CUSTOM_LOGGER
    ; Larger buffer reduces but doesn't eliminate blocking
    -D SERIAL_TX_BUFFER_SIZE=2048
    -D CONFIG_ARDUINO_SERIAL_BUFFER_SIZE=2048