; Boiler Controller Logger Example
; 
; This configuration shows best practices for systems with
; multiple verbose libraries that can flood the logger

[env:esp32dev]
platform = espressif32
board = esp32dev
framework = arduino

; CRITICAL: Use high baud rate to prevent message dropping
; At 115200 baud, you get ~11KB/s throughput
; At 921600 baud, you get ~92KB/s throughput (8x more!)
monitor_speed = 921600

; If your terminal doesn't support 921600, try these:
; monitor_speed = 460800  ; 4x faster than 115200
; monitor_speed = 230400  ; 2x faster than 115200

; Serial port configuration
upload_port = /dev/ttyACM0
monitor_port = /dev/ttyACM0

; Filters for cleaner output
monitor_filters = 
    direct
    esp32_exception_decoder

; Build configuration
build_flags = 
    ; Enable custom logger
    -D USE_CUSTOM_LOGGER
    
    ; Debug level for ESP-IDF components
    -D CORE_DEBUG_LEVEL=4
    
    ; Logger buffer size (optional - default is 256)
    -D CONFIG_LOG_BUFFER_SIZE=256
    
    ; Increase serial TX buffer for less dropping
    ; Default is 128 bytes - increase for heavy logging
    -D SERIAL_TX_BUFFER_SIZE=512
    -D CONFIG_ARDUINO_SERIAL_BUFFER_SIZE=512
    
    ; Optional: Enable logger debug output
    ; -D LOGGER_DEBUG

; Libraries
lib_deps = 
    ; Logger library (symlinked)

; For production builds with less logging
[env:esp32dev_production]
extends = env:esp32dev
build_flags = 
    ${env:esp32dev.build_flags}
    -D PRODUCTION_BUILD
    -D CORE_DEBUG_LEVEL=3  ; Warnings and above only
    
; For development with maximum verbosity
[env:esp32dev_verbose]
extends = env:esp32dev
monitor_speed = 921600  ; MUST use high speed for verbose logging
build_flags = 
    ${env:esp32dev.build_flags}
    -D DEBUG_BUILD
    -D CORE_DEBUG_LEVEL=5  ; Everything including verbose