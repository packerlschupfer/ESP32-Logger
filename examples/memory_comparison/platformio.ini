[platformio]
default_envs = esp32dev_no_logger, esp32dev_with_logger

; Common settings
[env]
platform = espressif32
board = esp32dev
framework = arduino
monitor_speed = 115200
monitor_filters = esp32_exception_decoder
lib_deps = 
    ../..  ; Logger library

; Environment WITHOUT custom logger (ESP-IDF only)
[env:esp32dev_no_logger]
build_src_filter = -<*> +<main.cpp>
build_flags =
    -D CORE_DEBUG_LEVEL=3
    ; USE_CUSTOM_LOGGER is NOT defined

; Environment WITH custom logger
[env:esp32dev_with_logger]
build_src_filter = -<*> +<main.cpp>
build_flags =
    -D CORE_DEBUG_LEVEL=3
    -D USE_CUSTOM_LOGGER

; Stack limit test environments
[env:stack_test_esp_idf]
build_src_filter = -<*> +<stack_limit_test.cpp>
build_flags = 
    -D CORE_DEBUG_LEVEL=3
    ; USE_CUSTOM_LOGGER is NOT defined

[env:stack_test_custom]
build_src_filter = -<*> +<stack_limit_test.cpp>
build_flags = 
    -D CORE_DEBUG_LEVEL=3
    -D USE_CUSTOM_LOGGER